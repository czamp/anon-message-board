(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{252:function(e,t,a){e.exports=a(439)},439:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(61),o=a.n(c),l=(a(257),a(18)),s=a(19),i=a(21),d=a(20),u=a(22),h=a(15),p=a(63),m=a(446),b=a(457),E=a(448),f=a(460),y=a(459),g=a(447),v=a(452),_=a(42),O=a.n(_),j="https://ash-skate.glitch.me/",w={listBoards:function(e,t){return O.a.get("".concat(j,"/api/boards")).then(function(t){return e(t.data)}).catch(function(e){return t(e.response)})},listThreads:function(e,t,a){O.a.get("".concat(j,"/api/threads/").concat(e)).then(function(e){return t(e.data)}).catch(function(e){return a(e.response)})},getCompleteThread:function(e,t,a,n){O.a.get("".concat(j,"/api/replies/").concat(e,"?thread_id=").concat(t)).then(function(e){return a(e)}).catch(function(e){return n(e.response)})},postThread:function(e,t,a,n,r,c){e.preventDefault(),O.a.post("".concat(j,"/api/threads/").concat(t),{text:a,delete_password:n}).then(function(e){return r(e)}).catch(function(e){return c(e.response)})},postReply:function(e,t,a,n,r,c,o){e.preventDefault(),O.a.post("".concat(j,"/api/replies/").concat(t),{text:a,delete_password:n,thread_id:r}).then(function(e){return c(e)}).catch(function(e){return o(e.response)})},deleteThread:function(e,t,a,n,r,c){e.preventDefault(),O.a.delete("".concat(j,"/api/threads/").concat(t),{data:{thread_id:a,delete_password:n}}).then(function(e){return r(e)}).catch(function(e){return c(e.response)})},deleteReply:function(e,t,a,n,r,c,o){e.preventDefault(),O.a.delete("".concat(j,"/api/replies/").concat(t),{data:{thread_id:a,reply_id:n,delete_password:r}}).then(function(e){return c(e)}).catch(function(e){return o(e.response)})},reportThread:function(e,t,a,n){O.a.put("".concat(j,"/api/threads/").concat(e),{thread_id:t}).then(function(e){return a(e)}).catch(function(e){return n(e.response)})},reportReply:function(e,t,a,n,r){O.a.put("".concat(j,"/api/replies/").concat(e),{thread_id:t,reply_id:a}).then(function(e){return n(e)}).catch(function(e){return r(e.response)})}},S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={boards:[],isLoading:!0},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.listBoards(function(t,a){a&&console.log(a),e.setState({boards:t.sort(function(e,t){return e>t?1:-1}),isLoading:!1})})}},{key:"render",value:function(){return r.a.createElement(m.a,{style:{marginTop:"2rem"}},r.a.createElement(f.a,null,r.a.createElement(y.a,{as:"h2"},"Select a board to begin"),r.a.createElement(g.a,{inline:"centered",active:this.state.isLoading},"Fetching Boards..."),r.a.createElement(v.a,{horizontal:!0,divided:!0,celled:!0},this.state.boards.map(function(e,t){return r.a.createElement(v.a.Item,{key:t},r.a.createElement(h.b,{to:"/b/".concat(e)},e.toUpperCase()))}))))}}]),t}(r.a.Component),C=a(52),k=a(242),x=a(449),T=a(451),L=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={text:"",delete:"",board:"",boards:[],success:!1,isLoading:!0},a.handleAddition=function(e,t){var n=t.value;a.setState(function(e){return{boards:[{text:n,value:n}].concat(Object(k.a)(e.boards))}})},a.handleChange=function(e,t){var n=t.name,r=t.value;a.setState(Object(C.a)({},n,r))},a.handleSubmit=function(e){w.postThread(e,a.state.board,a.state.text,a.state.delete,function(){return a.setState({success:!0,text:"",delete:""})},function(e){return console.log(e)})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.listBoards(function(t,a){a&&console.log(a),t=t.map(function(e,t){return{key:t,text:e,value:e}}),e.setState({isLoading:!1,boards:t.sort(function(e,t){return e.text>t.text?1:-1})})})}},{key:"render",value:function(){return r.a.createElement(f.a,null,r.a.createElement(y.a,null,"Submit a New Thread"),r.a.createElement(x.a,null,r.a.createElement(x.a.Field,null,r.a.createElement("label",null,"Board"),r.a.createElement(T.a,{allowAdditions:!0,disabled:this.state.isLoading,fluid:!0,loading:this.state.isLoading,name:"board",onAddItem:this.handleAddition,onChange:this.handleChange,options:this.state.boards,placeholder:"Choose a board, or create your own",search:!0,selection:!0,value:this.state.board})),r.a.createElement(x.a.Field,null,r.a.createElement("label",null,"Thread Text"),r.a.createElement(x.a.TextArea,{name:"text",onChange:this.handleChange,placeholder:"Thread text...",value:this.state.text})),r.a.createElement(x.a.Field,null,r.a.createElement(x.a.Group,null,r.a.createElement(x.a.Input,{name:"delete",onChange:this.handleChange,placeholder:"Password to delete...",size:"mini",type:"password",value:this.state.delete,width:4}),r.a.createElement(x.a.Button,{content:"Submit Thread",icon:"edit",labelPosition:"left",onClick:this.handleSubmit,primary:!0,size:"mini"})))),this.state.success&&r.a.createElement(p.a,{to:"/b/".concat(this.state.board,"/")}))}}]),t}(r.a.Component),D=function(){return r.a.createElement(m.a,{text:!0,style:{paddingTop:"2rem",display:"flex",justifyContent:"center",flexDirection:"column"}},r.a.createElement(b.a,null,r.a.createElement(b.a.Section,{link:!0},r.a.createElement(h.b,{to:"/"},"Boards"))),r.a.createElement(S,null),r.a.createElement(E.a,{horizontal:!0},"or"),r.a.createElement(L,null))},A=a(453),R=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={text:"",delete:"",success:!1,postId:""},a.handleChange=function(e,t){var n=t.name,r=t.value;a.setState(Object(C.a)({},n,r))},a.handleSubmit=function(e){w.postThread(e,a.props.board,a.state.text,a.state.delete,function(e){return a.setState({success:!0,postId:e.data})},function(e){return console.log(e)})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,{secondary:!0},r.a.createElement(y.a,null,"Submit a New Thread"),r.a.createElement(x.a,null,r.a.createElement(x.a.Field,null,r.a.createElement("label",null,"Thread Text"),r.a.createElement(x.a.TextArea,{name:"text",onChange:this.handleChange,placeholder:"Thread text...",value:this.state.text})),r.a.createElement(x.a.Field,null,r.a.createElement(x.a.Group,null,r.a.createElement(x.a.Input,{name:"delete",onChange:this.handleChange,placeholder:"Password to delete...",size:"mini",type:"password",value:this.state.delete,width:4}),r.a.createElement(x.a.Button,{content:"Submit Thread",icon:"edit",labelPosition:"left",onClick:this.handleSubmit,primary:!0,size:"mini"})))),this.state.success&&r.a.createElement("div",null,r.a.createElement(A.a,{success:!0},"Your thread was successfully submitted"),r.a.createElement(p.a,{to:"/b/".concat(this.props.board,"/thread/").concat(this.state.postId)})))}}]),t}(r.a.Component),B=a(458),I=a(450),z=a(55),M=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={delete_password:"",error:!1,isLoading:!1,message:"",success:!1},a.handleChange=function(e,t){var n=t.name,r=t.value;a.setState(Object(C.a)({},n,r))},a.deleteThread=function(e){a.setState({isLoading:!0}),w.deleteThread(e,a.props.board,a.props.thread_id,a.state.delete_password,function(e){return"incorrect password"!==e.data?a.setState({error:!1,isLoading:!1,message:"",success:!0}):a.setState({error:!0,isLoading:!1,message:e.data,success:!1,modalOpen:!1})},function(e){return a.setState({error:!0,isLoading:!1,message:e,success:!1})})},a.deleteReply=function(e){w.deleteReply(e,a.props.board,a.props.thread_id,a.props.reply_id,a.state.delete_password,function(e){return"incorrect password"!==e.data?a.setState({success:!0,error:!1,message:"",modalOpen:!1}):a.setState({success:!1,error:!0,message:e.data})},function(e){return console.log(e)})},a.onSuccess=function(){return a.props.onSuccess()},a.openModal=function(){return a.setState({modalOpen:!0})},a.closeModal=function(){return a.setState({modalOpen:!1})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(I.a,{onClose:this.closeModal,open:this.state.modalOpen,size:"small",trigger:r.a.createElement(z.a,{onClick:this.openModal,link:!0,name:"trash"})},r.a.createElement(I.a.Content,null,r.a.createElement(y.a,null,"Delete this post?"),r.a.createElement(x.a,null,r.a.createElement(x.a.Field,null,r.a.createElement("label",null,"Enter your delete password to delete this post."),r.a.createElement(x.a.Input,{name:"delete_password",onChange:this.handleChange,placeholder:"Password to delete...",type:"password",value:this.state.delete_password})),r.a.createElement(x.a.Group,null,r.a.createElement(x.a.Button,{basic:!0,color:"red",loading:this.state.isLoading,onClick:"reply"===this.props.type?this.deleteReply:this.deleteThread,size:"mini"},"Delete"),r.a.createElement(x.a.Button,{size:"mini",onClick:this.closeModal,color:"blue"},"Cancel"))),this.state.success&&r.a.createElement(A.a,{success:!0},r.a.createElement(A.a.Header,null,"Success"),"thread"===this.props.type?"Thread":"Reply ","#","thread"===this.props.type?this.props.thread_id:this.props.reply_id," ","successfully deleted."),this.state.error&&r.a.createElement(A.a,{error:!0},r.a.createElement(A.a.Header,null,"Error: ",this.state.message," "),r.a.createElement("p",null,"thread"===this.props.type?"Thread ":"Reply ","#","thread"===this.props.type?this.props.thread_id:this.props.reply_id," ","could not be deleted."))))}}]),t}(r.a.Component),F=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={success:!1,error:!1},a.reportThread=function(){w.reportThread(a.props.board,a.props.thread_id,function(e){return a.setState({success:!0,error:!1})},function(e){return a.setState({error:!0,success:!1,message:e.data})})},a.reportReply=function(){a.setState({isLoading:!0}),w.reportReply(a.props.board,a.props.thread_id,a.props.reply_id,function(e){return a.setState({success:!0,error:!1,isLoading:!1})},function(e){return a.setState({error:!0,success:!1,message:e.data})})},a.handleClose=function(){return a.setState({modalOpen:!1})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.type;return r.a.createElement("span",null,this.state.success?r.a.createElement(z.a,{name:"check",color:"green"}):r.a.createElement(z.a,{color:"red",disabled:this.state.success,link:!this.state.success,name:"flag",onClick:"thread"===e?this.reportThread:this.reportReply}))}}]),t}(r.a.Component),P=function(e){var t=e.board,a=e.reply,n=e.thread_id;return r.a.createElement(f.a.Group,null,r.a.createElement(f.a,null,r.a.createElement(B.a,null,r.a.createElement(B.a.Column,{width:14},r.a.createElement(h.b,{to:"/b/".concat(t,"/thread/").concat(n)},"#",a._id)," |"," ",r.a.createElement("time",{dateTime:new Date(a.created_on)},new Date(a.created_on).toLocaleString("en-US"))),r.a.createElement(B.a.Column,{width:2},r.a.createElement(F,{board:t,reply_id:a._id,thread_id:n,type:"reply"}),r.a.createElement(M,{board:t,reply_id:a._id,thread_id:n,type:"reply"})))),r.a.createElement(f.a,null,a.text))},G=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={text:"",delete:"",success:!1},a.handleChange=function(e,t){var n=t.name,r=t.value;a.setState(Object(C.a)({},n,r))},a.handleSubmit=function(e){w.postReply(e,a.props.board,a.state.text,a.state.delete,a.props.thread_id,function(){return a.setState({success:!0})},function(e){return console.log(e)})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,{secondary:!0},r.a.createElement(y.a,{as:"h5"},"Reply to Thread"),r.a.createElement(x.a,{reply:!0},r.a.createElement(x.a.Field,null,r.a.createElement(x.a.TextArea,{name:"text",onChange:this.handleChange,placeholder:"Reply text...",value:this.state.text})),r.a.createElement(x.a.Field,null,r.a.createElement(x.a.Group,null,r.a.createElement(x.a.Button,{content:"Add Reply",icon:"reply",labelPosition:"left",onClick:this.handleSubmit,primary:!0,size:"mini"}),r.a.createElement(x.a.Input,{name:"delete",onChange:this.handleChange,placeholder:"Password to delete...",size:"mini",type:"password",value:this.state.delete,width:4})))),this.state.success&&r.a.createElement(A.a,{success:!0},"Your reply was successfully submitted"))}}]),t}(r.a.Component),H=function(e){var t=e.board,a=e.thread;return r.a.createElement(f.a.Group,null,r.a.createElement(f.a,{secondary:!0},r.a.createElement(B.a,{columns:2},r.a.createElement(B.a.Column,{width:14},r.a.createElement(h.b,{to:"/b/".concat(t,"/thread/").concat(a._id)},"#",a._id)," |"," ",r.a.createElement("time",{dateTime:new Date(a.created_on)},new Date(a.created_on).toLocaleString("en-US"))),r.a.createElement(B.a.Column,{width:2},r.a.createElement(F,{board:t,thread_id:a._id}),r.a.createElement(M,{board:t,thread_id:a._id,type:"thread"})))),r.a.createElement(f.a,null,a.text),a.replycount>0&&r.a.createElement(f.a,{secondary:!0},a.replies.map(function(e){return r.a.createElement(P,{board:t,key:e._id,reply:e,thread_id:a._id})})),a.replycount>3&&r.a.createElement(f.a,{tertiary:!0},r.a.createElement("p",null,a.replycount-3," replies omitted."," ",r.a.createElement(h.b,{to:"/b/".concat(t,"/thread/").concat(a._id)},"Click to Expand."))),r.a.createElement(G,{board:t,thread_id:a._id}))},U=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={threads:[],isLoading:!0},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.listThreads(this.props.board,function(t){return e.setState({threads:t,isLoading:!1,error:!1})},function(t){return e.setState({isLoading:!1,error:!0})})}},{key:"render",value:function(){var e=this,t=this.state.threads;return r.a.createElement(f.a,{vertical:!0},r.a.createElement(g.a,{active:this.state.isLoading}),!this.state.isLoading&&r.a.createElement("div",null,this.state.error&&r.a.createElement("div",null,r.a.createElement(y.a,{as:"h2"},"Sorry, there seems to be a problem."),r.a.createElement(y.a,{as:"h4"},"Please try again.")),0===this.state.threads.length&&r.a.createElement("div",null,r.a.createElement(y.a,{as:"h2"},"Sorry, there don't appear to be any threads here right now."),r.a.createElement(y.a,{as:"h4"}," Why don't you create a new one?"))),t.map(function(t){return r.a.createElement(H,{key:t._id,thread:t,board:e.props.board})}))}}]),t}(r.a.Component),J=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,{text:!0,style:{paddingTop:"2rem"}},r.a.createElement(b.a,null,r.a.createElement(b.a.Section,{link:!0},r.a.createElement(h.b,{to:"/"},"Boards")),r.a.createElement(b.a.Divider,null),r.a.createElement(b.a.Section,{link:!0},r.a.createElement(h.b,{to:"/b/".concat(this.props.match.params.board,"/")},this.props.match.params.board)),r.a.createElement(b.a.Divider,null),r.a.createElement(b.a.Section,{link:!0},r.a.createElement(h.b,{to:"/b/".concat(this.props.match.params.board,"/thread/").concat(this.props.match.params.id)},this.props.match.params.id))),r.a.createElement(y.a,{as:"h1"},r.a.createElement(h.b,{to:"/b/".concat(this.props.match.params.board,"/")},"/b/",this.props.match.params.board,"/")),r.a.createElement(R,{board:this.props.match.params.board}),r.a.createElement(U,{board:this.props.match.params.board}))}}]),t}(r.a.Component),N=function(e){var t=e.board,a=e.thread;e.value;return r.a.createElement(f.a.Group,null,r.a.createElement(f.a,{secondary:!0},r.a.createElement(B.a,{columns:2},r.a.createElement(B.a.Column,{width:14},r.a.createElement(h.b,{to:"/b/".concat(t,"/thread/").concat(a._id)},"#",a._id)),r.a.createElement(B.a.Column,{width:2},r.a.createElement(F,{board:t,type:"thread",thread_id:a._id}),r.a.createElement(M,{board:t,type:"thread",thread_id:a._id})))),r.a.createElement(f.a,null,a.text),r.a.createElement(f.a,{secondary:!0},a.replies.map(function(e){return r.a.createElement(P,{board:t,key:e._id,reply:e,thread_id:a._id})})),r.a.createElement(G,{board:t,thread_id:a._id}))},Y=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={thread:{},isLoading:!0},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.getCompleteThread(this.props.match.params.board,this.props.match.params.id,function(t){return e.setState({thread:t.data,isLoading:!1})},function(e){return"err"})}},{key:"render",value:function(){var e=this.props.match.params.board;return r.a.createElement(m.a,{style:{paddingTop:"2rem"},text:!0},r.a.createElement(b.a,null,r.a.createElement(b.a.Section,{link:!0},r.a.createElement(h.b,{to:"/"},"Boards")),r.a.createElement(b.a.Divider,null),r.a.createElement(b.a.Section,{link:!0},r.a.createElement(h.b,{to:"/b/".concat(this.props.match.params.board,"/")},this.props.match.params.board)),r.a.createElement(b.a.Divider,null),r.a.createElement(b.a.Section,{link:!0},r.a.createElement(h.b,{to:"/b/".concat(this.props.match.params.board,"/thread/").concat(this.props.match.params.id)},this.props.match.params.id))),r.a.createElement(y.a,{as:"h1"},r.a.createElement(h.b,{to:"/b/".concat(e,"/")},"/b/",e,"/")),r.a.createElement(g.a,{active:this.state.isLoading}),!this.state.isLoading&&r.a.createElement(N,{board:this.props.match.params.board,thread:this.state.thread}))}}]),t}(r.a.Component),W=a(455),q=a(454),K=function(){return r.a.createElement(W.a,{color:"blue",inverted:!0,secondary:!0},r.a.createElement(W.a.Item,null,r.a.createElement(W.a.Header,{as:"h3"},"Anon Messageboards")),r.a.createElement(W.a.Menu,null,r.a.createElement(W.a.Item,null,r.a.createElement(h.b,{to:"/"},"Home"))),r.a.createElement(W.a.Menu,{position:"right"},r.a.createElement(W.a.Item,{link:!0},r.a.createElement("a",{href:"https://github.com/czamp",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(q.a,{icon:!0,inverted:!0,color:"white"},r.a.createElement(z.a,{name:"github"})," ","See The Source Code")))))},Q=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement("div",{style:{minHeight:"100vh",background:"#f0e0d6"}},r.a.createElement(K,null),r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/",exact:!0,component:D}),r.a.createElement(p.b,{path:"/b/:board/",exact:!0,component:J}),r.a.createElement(p.b,{path:"/b/:board/thread/:id",exact:!0,component:Y}))))}}]),t}(r.a.Component);o.a.render(r.a.createElement(Q,null),document.getElementById("root"))}},[[252,1,2]]]);
//# sourceMappingURL=main.c34ae34a.chunk.js.map